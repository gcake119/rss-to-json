<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>é›è›‹ç³•çš„å¤šé‡å®‡å®™ï½œGCAKE.Space</title>
  <style id="themeStyles"></style>
  <style>
    /* ========== åŸºç¤ç‰ˆé¢èˆ‡å­—å‹ ========== */
    body { 
      margin:0; 
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif; 
    }
    
    /* ========== Header å°è¦½åˆ— ========== */
    header { 
      padding:1rem 2rem; 
      border-bottom:1px solid #333; 
      display:flex; 
      justify-content:space-between; 
      align-items:center; 
    }
    header .logo { display:flex; align-items:center; }
    header .logo img { height:40px; margin-right:0.5rem; }
    nav a { margin-left:1rem; text-decoration:none; }
    nav a:hover { text-decoration:underline; }
    
    /* ========== ä¸»è¦å…§å®¹å€åŸŸ ========== */
    main { padding:2rem; max-width:960px; margin:auto; }
    
    /* ========== å¡ç‰‡å…ƒä»¶ ========== */
    .card { 
      border-radius:12px; 
      padding:1rem; 
      margin-bottom:1rem; 
      transition: all 0.2s ease;
    }
    .card h3 { margin:0.2rem 0 0.4rem; }
    .card:hover { transform: translateY(-2px); }
    
    /* ========== æ–‡å­—èˆ‡æ¨™ç±¤æ¨£å¼ ========== */
    .meta { font-size:0.9em; margin:0.2em 0 0.6em; }
    .cover { width:100%; border-radius:8px; margin:0.5rem 0; }
    .badge { 
      display:inline-block; 
      font-size:0.75em; 
      padding:0.15em 0.5em; 
      border-radius:999px; 
      border:1px solid #888; 
      margin-left:0.5rem; 
    }
    
    /* ========== åˆ†é èˆ‡æ“ä½œæŒ‰éˆ• ========== */
    .pager { margin:1rem 0; }
    .pager a { text-decoration:none; margin-right:0.5rem; }
    .pager a.current { text-decoration:underline; }
    
    /* ========== Podcast æ’­æ”¾å™¨ ========== */
    iframe.podcast-player { 
      width:100%; 
      height:180px; 
      border:0; 
      border-radius:10px; 
      overflow:hidden; 
      margin:0.5rem 0;
    }
    
    /* ========== é é¢åº•éƒ¨ ========== */
    footer { text-align:center; padding:1rem; border-top:1px solid #333; }
    
    /* ========== å…¶ä»–å…ƒä»¶ ========== */
    ul { margin:0.5em 0 0.5em 1em; }
    .avatar { width:120px; border-radius:50%; margin-bottom:1rem; }
    .grid { display:grid; grid-template-columns:1fr 1fr; gap:1rem; }
    
    /* ========== RWD éŸ¿æ‡‰å¼è¨­è¨ˆ ========== */
    @media (max-width: 800px) {
      .grid { grid-template-columns:1fr; }
      header { padding:0.8rem 1rem; }
      main { padding:1rem; }
    }
    
    /* ========== æŒ‰éˆ•æ¨£å¼ ========== */
    button { 
      background:transparent; 
      color:#38bdf8; 
      border:1px solid #665c54; 
      border-radius:8px; 
      padding:0.25rem 0.6rem; 
      cursor:pointer; 
    }
    button:hover { border-color:#a89984; }
    
    /* =========== é›»å­å ±å…¨æ–‡æ’ç‰ˆ ============ */
    .newsletter-detail .newsletter-cover {
        width: 100%;
        max-height: 400px;
        object-fit: cover;
        margin-bottom: 1.5em;
        border-radius: 12px;
        box-shadow: 0 2px 16px rgba(0,0,0,0.03);
    }
    .newsletter-content img.newsletter-img {
        display: block;
        margin: 1.5em auto;
        max-width: 92%;
        max-height: 420px;
        border-radius: 8px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.06);
        object-fit: contain;
    }
    .newsletter-content {
        line-height: 1.8;
        font-size: 1.07em;
        letter-spacing: 0.01em;
        word-break: break-word;
    }

  </style>
</head>
<body>
  <!-- ========== ç¶²ç«™ Header å°è¦½åˆ— ========== -->
  <header>
    <div class="logo">
      <img src="img/GCAKE.png" alt="GCAKE Logo">
      <strong>GCAKE.Space</strong>
    </div>
    <nav>
      <a href="#home">Home</a>
      <a href="#podcast">Podcast</a>
      <a href="#podcast2">Podcast2</a>
      <a href="#newsletter">Newsletter</a>
      <a href="#newsletter2">Newsletter2</a>
      <a href="#works">Works</a>
      <a href="#about">About</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>
  
  <!-- ========== ä¸»è¦å…§å®¹é¡¯ç¤ºå€åŸŸ ========== -->
  <main id="app"></main>
  
  <!-- ========== ç¶²ç«™åº•éƒ¨è³‡è¨Š ========== -->
  <footer>
    <p>Â© 2025 GCAKE.Space</p>
  </footer>
  
  <script>
    /* ========================================
     * ä¸»é¡Œæ¨£å¼è¨­å®š
     * ======================================== */
    // Gruvbox Dark è‰²å¼±å‹å–„ç‰ˆä¸»é¡Œ
    const gruvboxAccessible = `
      body { background:#282828; color:#ebdbb2; }
      header { background:#3c3836; border-bottom:1px solid #665c54; }
      nav a { color:#facc15; }
      nav a:hover { color:#38bdf8; }
      .card { background:#32302f; border:1px solid #665c54; }
      .card h3 { color:#facc15; }
      .meta { color:#a89984; }
      a { color:#38bdf8; }
      a:hover { color:#ec4899; }
      iframe.podcast-player { background:#000; }
      footer { background:#3c3836; color:#a89984; }
      .badge { border-color:#a89984; color:#a89984; }
    `;
    document.getElementById("themeStyles").textContent = gruvboxAccessible;

    /* ========================================
     * å·¥å…·å‡½å¼
     * ======================================== */
    
    // æ ¼å¼åŒ–æ—¥æœŸæ™‚é–“
    const fmtDate = iso => {
      try { 
        const d = new Date(iso); 
        return d.toISOString().slice(0,16).replace('T',' '); 
      }
      catch { return iso || ''; }
    };
    
    // HTML å­—ç¬¦è½‰ç¾©é˜²æ­¢ XSS
    const htmlEscape = (s='') => (s||'').replace(/[&<>"]/g, c=>({ 
      '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;' 
    }[c]));
    
    // è¼‰å…¥ JSON æª”æ¡ˆ
    async function loadJSON(url) {
      const res = await fetch(url, { cache:'no-cache' });
      if (!res.ok) throw new Error(`Load failed ${res.status} ${res.statusText} for ${url}`);
      return res.json();
    }
    
    // ç”¢ç”Ÿåˆ†é å™¨
    function pager(totalPages, baseHash, current=1) {
      let html = `<div class="pager">`;
      for(let p=1; p<=totalPages; p++) {
        const cls = p === current ? 'current' : '';
        html += `<a class="${cls}" href="${baseHash}?p=${p}">ç¬¬${p}é </a>`;
      }
      html += `</div>`;
      return html;
    }
    
    // è§£æ URL åƒæ•¸
    function params() {
      const h = location.hash.split('?');
      const qs = new URLSearchParams(h[1] || '');
      return Object.fromEntries(qs.entries());
    }
    
    // å°‡ Firstory permalink è½‰æ›ç‚ºå…§åµŒæ’­æ”¾å™¨ URL
    function firstoryEmbedFromPermalink(permalink) {
      if (typeof permalink !== "string") return null;
      if (permalink.startsWith("https://open.firstory.me/story/")) {
        return permalink.replace("/story/", "/embed/story/");
      }
      return null;
    }
    
    // è™•ç† substack æ–‡ç« æ’åœ–å’Œæ’ç‰ˆ
    function cleanContentHtml(html, coverUrl) {
  const wrapper = document.createElement('div');
  wrapper.innerHTML = html;

  // Remove cover images
  for (const img of wrapper.querySelectorAll('img')) {
    if (coverUrl && img.src === coverUrl) {
      img.remove();
      continue;
    }
    img.classList.add('newsletter-img');
    img.setAttribute('loading', 'lazy');
  }

  // Remove block elements for subscribe/share/buttons/toolbar, keep plain links
  for (const sel of [
    '.captioned-image-container',
    '.button',
    '.subscribe-button',
    '.share',
    '.sharing',
    '.newsletter-toolbar',
    '[data-testid="SubscriptionButton"]',
    'form',
    'iframe',
    'svg',
    '.icon',
    '.subscription-widget'
  ]) {
    for (const el of wrapper.querySelectorAll(sel)) {
      el.remove();
    }
  }

  // Optionally: Remove visually obvious buttons (styled as button or with 'Subscribe')
  for (const el of wrapper.querySelectorAll('a,button')) {
    // Only remove if styled as/not a plain text link (e.g. role button, big subscribe/share in block context)
    const isBlock = (
      el.tagName === 'BUTTON' ||
      window.getComputedStyle(el).display === 'block' ||
      el.className.match(/button|subscribe|share|icon/i)
    );
    if (isBlock && el.textContent.match(/è¨‚é–±|subscribe|åˆ†äº«|share/i)) {
      el.remove();
    }
  }

  // DO NOT remove <a> elements just based on substack.com href!
  // (So plain links to Substack profilesã€æ–‡ä¸­è³‡æ–™è¶…é€£çµéƒ½æœƒæ­£å¸¸ä¿ç•™)

  return wrapper.innerHTML;
}



    /* ========================================
     * Podcast ç›¸é—œæ¸²æŸ“å‡½å¼
     * ======================================== */
    
    // æ¸²æŸ“ Podcast åˆ—è¡¨é é¢
    async function renderPodcastList(rootDir, baseHash) {
      const p = parseInt(params().p || '1', 10);
      const idxUrl = `${rootDir}/index-p${p}.json`;
      let idx;
      
      // è¼‰å…¥åˆ†é ç´¢å¼•æª”æ¡ˆ
      try { 
        idx = await loadJSON(idxUrl); 
      } catch(e) { 
        // å¦‚æœä¸æ˜¯ç¬¬ä¸€é ä¸”è¼‰å…¥å¤±æ•—ï¼Œå›åˆ°ç¬¬ä¸€é 
        if (p !== 1) return renderPodcastList(rootDir, baseHash.replace(/\?p=\d+$/, '')); 
        throw e; 
      }
      
      // ç”¢ç”Ÿåˆ—è¡¨ HTML
      let html = `<div class="card"><p class="meta">å…± ${idx.total_items} ç¯‡ Â· åˆ†é  ${p}/${idx.total_pages}</p></div>`;
      
      for(const it of idx.items) {
        html += `
          <div class="card" style="cursor:pointer;" 
               onclick="location.hash='#viewPodcast?dir=${encodeURIComponent(rootDir)}&slug=${encodeURIComponent(it.slug)}'">
            <div style="display:flex;align-items:center;">
              ${(it.image || idx.show.image) ? 
                `<img src="${it.image || idx.show.image}" alt="" style="width:80px;height:80px;border-radius:8px;object-fit:cover;margin-right:1rem;">` 
                : ''}
              <div>
                <h3 style="margin:0.2rem 0;">${htmlEscape(it.title || '')}</h3>
                <div class="meta">
                  ${fmtDate(it.pub_date || '')} 
                  ${it.duration ? `ï½œ${it.duration}` : ''}
                  ${it.season ? `ï½œS${it.season}` : ''}
                  ${it.episode ? `E${it.episode}` : ''}
                </div>
              </div>
            </div>
          </div>
        `;
      }
      
      html += pager(idx.total_pages||1, baseHash, p);
      return html;
    }
    
    // æ¸²æŸ“ Podcast å–®é›†è©³æƒ…é é¢
    async function renderPodcastDetail(dir, slug) {
      const tryPages = [1,2,3,4,5];
      let itemMeta = null;
      
      // åœ¨å¤šå€‹åˆ†é ä¸­å°‹æ‰¾å°æ‡‰çš„å–®é›†è³‡æ–™
      for(const p of tryPages) {
        try {
          const idx = await loadJSON(`${dir}/index-p${p}.json`);
          itemMeta = (idx.items||[]).find(x=>x.slug===slug);
          if(itemMeta) break;
        } catch{}
      }
      
      if(!itemMeta) {
        return `<div class="card"><p>æ‰¾ä¸åˆ°å–®é›†ï¼ˆslug=${htmlEscape(slug)}ï¼‰ã€‚</p></div>`;
      }
      
      // çµ„åˆå–®é›†æª”æ¡ˆè·¯å¾‘
      const d = new Date(itemMeta.pub_date||Date.now());
      const yyyy = d.getUTCFullYear();
      const mm = String(d.getUTCMonth()+1).padStart(2,'0');
      const dd = String(d.getUTCDate()).padStart(2,'0');
      const file = `${dir}/${slug}.json`;
      
      // è¼‰å…¥å–®é›†è©³ç´°è³‡æ–™
      let art;
      try { 
        art = await loadJSON(file); 
      } catch { 
        return `<div class="card">
          <h3>${htmlEscape(itemMeta.title||'')}</h3>
          <p>ç„¡æ³•è¼‰å…¥æœ¬åœ°å–®é›†è³‡æ–™ã€‚</p>
          ${itemMeta.link ? `<p><a href="${itemMeta.link}" target="_blank" rel="noopener">å‰å¾€åŸæ–‡</a></p>` : ''}
        </div>`; 
      }
      
      // ç”¢ç”Ÿ Firstory å…§åµŒæ’­æ”¾å™¨
      const embed = firstoryEmbedFromPermalink(art.permalink||art.link);
      
      return `
        <div class="card">
          <h2>${htmlEscape(art.title||'')}</h2>
          <div class="meta">
            ${fmtDate(art.pub_date||'')} 
            ${art.duration ? `ï½œ${art.duration}`: ''}
            ${art.season?`ï½œSeason ${art.season}`:''}
            ${art.episode?`ï½œEp${art.episode}`:''}
          </div>
          ${art.cover ? `<img class="cover" src="${art.cover}" alt="">` : ''}
          ${embed ? `<iframe class="podcast-player" src="${embed}" allow="autoplay"></iframe>` : ''}
          ${art.audio ? `<p><a href="${art.audio}" target="_blank" rel="noopener">ä¸‹è¼‰éŸ³æª”</a></p>` : ''}
          <div style="margin-top:0.8em;">
            ${art.description_html||htmlEscape(art.description_text||'')}
          </div>
          ${art.link ? `<p><a href="${art.link}" target="_blank" rel="noopener">åŸæ–‡é€£çµ</a></p>` : ''}
          <div class="pager">
            <a href="javascript:history.back()">â† è¿”å›åˆ—è¡¨</a>
          </div>
        </div>
      `;
    }

    /* ========================================
     * Newsletter ç›¸é—œæ¸²æŸ“å‡½å¼
     * ======================================== */
    
    // æ¸²æŸ“ Newsletter åˆ—è¡¨é é¢
    async function renderNewsletterList(rootDir, baseHash) {
      const p = parseInt(params().p || '1', 10);
      const idxUrl = `${rootDir}/index-p${p}.json`;
      let idx;
      
      // è¼‰å…¥åˆ†é ç´¢å¼•æª”æ¡ˆ
      try { 
        idx = await loadJSON(idxUrl); 
      } catch(e) { 
        // å¦‚æœä¸æ˜¯ç¬¬ä¸€é ä¸”è¼‰å…¥å¤±æ•—ï¼Œå›åˆ°ç¬¬ä¸€é 
        if (p !== 1) return renderNewsletterList(rootDir, baseHash.replace(/\?p=\d+$/, '')); 
        throw e; 
      }
      
      // ç”¢ç”Ÿåˆ—è¡¨ HTML
      let html = `<div class="card"><p class="meta">å…± ${idx.total_items} ç¯‡ Â· åˆ†é  ${p}/${idx.total_pages}</p></div>`;
      
      for(const it of idx.items) {
        html += `
          <div class="card" style="cursor:pointer;" 
               onclick="location.hash='#viewNewsletter?dir=${encodeURIComponent(rootDir)}&slug=${encodeURIComponent(it.slug)}'">
            <div style="display:flex;align-items:center;">
              ${it.cover ? 
                `<img src="${it.cover}" alt="" 
                     style="width:80px;height:80px;border-radius:8px;object-fit:cover;margin-right:1rem;">` 
                : ''}
              <div style="flex:1;">
                <h3 style="margin:0.2rem 0;">
                  ${htmlEscape(it.title||'')}
                  ${it.has_voiceover ? `<span class="badge">voiceover</span>` : ''}
                </h3>
                <div class="meta">${fmtDate(it.pub_date||'')}</div>
                ${it.summary ? `<p style="margin:0.3rem 0; color:#a89984; font-size:0.9em;">${htmlEscape(it.summary)}</p>` : ''}
              </div>
            </div>
          </div>
        `;
      }
      
      html += pager(idx.total_pages||1, baseHash, p);
      return html;
    }
    
    // æ¸²æŸ“ Newsletter å–®ç¯‡è©³æƒ…é é¢
    async function renderNewsletterDetail(dir, slug) {
  const tryPages = [1,2,3,4,5];
  let itemMeta = null;
  for(const p of tryPages){
    try{
      const idx = await loadJSON(`${dir}/index-p${p}.json`);
      itemMeta = (idx.items||[]).find(x=>x.slug===slug);
      if(itemMeta) break;
    }catch{}
  }
  if(!itemMeta) {
    return `<div class="card"><p>æ‰¾ä¸åˆ°æ–‡ç« ï¼ˆslug=${htmlEscape(slug)}ï¼‰ã€‚</p></div>`;
  }
  const d = new Date(itemMeta.pub_date||Date.now());
  const yyyy = d.getUTCFullYear();
  const mm = String(d.getUTCMonth()+1).padStart(2,'0');
  const dd = String(d.getUTCDate()).padStart(2,'0');
  const file = `${dir}/${yyyy}-${mm}-${dd}_${slug}.json`;
  let art;
  try{ 
    art = await loadJSON(file);
  } catch{
    return `<div class="card">
      <h3>${htmlEscape(itemMeta.title||'')}</h3>
      <p>ç„¡æ³•è¼‰å…¥æœ¬åœ°æ–‡ç« ã€‚</p>
    </div>`;
  }
  const tags = Array.isArray(art.tags) && art.tags.length ? 
    `<p class="meta"># ${art.tags.map(htmlEscape).join(' Â· ')}</p>` : '';
  return `
    <div class="card">
      <h2>${htmlEscape(art.title||'')}</h2>
      <div class="meta">${fmtDate(art.pub_date||'')}</div>
      ${tags}
      ${art.cover ? `<img class="cover" src="${art.cover}" alt="">` : ''}
      ${art.voiceover?.url ? `<p><a href="${art.voiceover.url}" target="_blank" rel="noopener">ğŸµ Voiceover éŸ³è¨Š</a></p>` : ''}
      <div class="newsletter-content" style="margin-top:0.8em;">
        ${
            art.content_html
                ? cleanContentHtml(art.content_html, art.cover)
                : `<p>${htmlEscape(art.content_text||'')}</p>`
        }
      </div>
      <div class="pager">
        <a href="javascript:history.back()">â† è¿”å›åˆ—è¡¨</a>
      </div>
    </div>
  `;
}

    /* ========================================
     * é é¢çµ„ä»¶å‡½å¼
     * ======================================== */
    
    // Podcast ç¬¬ä¸€æª”ç¯€ç›®é é¢
    async function pagePodcast1() {
      const head = `
        <h1>Podcastï½œã€Šå–‚å–‚ä½ é‚„å¥½ä¸å¥½ã€‹</h1>
        <div class="card">
          <p>è«‡ç²¾ç¥å¥åº·ã€åº·å¾©èˆ‡æ”¯æŒç¶²çµ¡çš„çœŸå¯¦åˆ†äº«ã€‚</p>
          <p><a href="https://open.firstory.me/join/wwhowbuhow" target="_blank" rel="noopener">æ”¯æŒèˆ‡è´ŠåŠ©</a></p>
        </div>
      `;
      const list = await renderPodcastList('/data/podcast/podcast_1', '#podcast');
      return head + list;
    }
    
    // Podcast ç¬¬äºŒæª”ç¯€ç›®é é¢
    async function pagePodcast2() {
      const head = `
        <h1>Podcastï½œã€Šé›è›‹ç³•å­µè›‹ä¸­ã€‹</h1>
        <div class="card">
          <p>ç¬¬äºŒæª”ç¯€ç›®ï¼Œä¸»é¡Œå»¶ä¼¸èˆ‡å‰µä½œå¯¦é©—ã€‚</p>
          <p><a href="https://open.firstory.me/join/wwhowbuhow" target="_blank" rel="noopener">æ”¯æŒèˆ‡è´ŠåŠ©</a></p>
        </div>
      `;
      const list = await renderPodcastList('/data/podcast/podcast_2', '#podcast2');
      return head + list;
    }
    
    // Newsletter ç¬¬ä¸€ä»½é›»å­å ±é é¢
    async function pageNewsletter1() {
      const head = `
        <h1>Newsletterï½œã€Šå–‚å–‚ä½ é‚„å¥½ä¸å¥½ã€‹</h1>
        <div class="card">
          <ul>
            <li>Firstoryï¼š<a href="https://open.firstory.me/join/wwhowbuhow" target="_blank" rel="noopener">é€£çµ</a></li>
            <li>Substackï¼š<a href="https://wwhowbuhow.substack.com/" target="_blank" rel="noopener">é€£çµ</a></li>
            <li>Paragraphï¼š<a href="https://paragraph.com/@wwhowbuhow" target="_blank" rel="noopener">é€£çµ</a></li>
          </ul>
        </div>
      `;
      const list = await renderNewsletterList('/data/newsletter/newsletter_1', '#newsletter');
      return head + list;
    }
    
    // Newsletter ç¬¬äºŒä»½é›»å­å ±é é¢
    async function pageNewsletter2() {
      const head = `
        <h1>Newsletterï½œã€Šå€å¡Šéˆæ–‡æ‘˜ã€‹</h1>
        <div class="card">
          <ul>
            <li>Substackï¼š<a href="https://taiweb3.substack.com/" target="_blank" rel="noopener">é€£çµ</a></li>
            <li>Paragraphï¼š<a href="https://paragraph.com/@tw3" target="_blank" rel="noopener">é€£çµ</a></li>
          </ul>
        </div>
      `;
      const list = await renderNewsletterList('/data/newsletter/newsletter_2', '#newsletter2');
      return head + list;
    }

    /* ========================================
     * éœæ…‹é é¢å…§å®¹
     * ======================================== */
    
    const staticPages = {
      home: `
        <h1>Welcome to GCAKE.Space</h1>
        <p>å€‹äººå“ç‰Œèˆ‡å‰µä½œç©ºé–“ï¼Œèšç„¦ Podcastã€é›»å­å ±èˆ‡ç ”ç©¶ä½œå“ã€‚</p>
        <div class="grid">
          <div class="card">
            <h3>Podcast</h3>
            <p><a href="#podcast">ã€Šå–‚å–‚ä½ é‚„å¥½ä¸å¥½ã€‹</a></p>
            <p><a href="#podcast2">ã€Šé›è›‹ç³•å­µè›‹ä¸­ã€‹</a></p>
          </div>
          <div class="card">
            <h3>Newsletter</h3>
            <p><a href="#newsletter">å–‚å–‚ä½ é‚„å¥½ä¸å¥½</a></p>
            <p><a href="#newsletter2">å€å¡Šéˆæ–‡æ‘˜</a></p>
          </div>
        </div>
      `,
      works: `
        <h1>Works & Resources</h1>
        <div class="card">
          <h3>Taiwan Podcaster é¾å¤§è³‡è¨ŠäººåŒ…</h3>
          <p><a href="https://sites.google.com/view/taiwanpodcast/" target="_blank" rel="noopener">å…¥å£ 1</a> ï½œ <a href="https://sites.google.com/view/taiwanpodcast/%E9%A6%96%E9%A0%81?authuser=0" target="_blank" rel="noopener">å…¥å£ 2</a></p>
        </div>
      `,
      about: `
        <h1>About</h1>
        <img src="img/gcake_pod.png" alt="Avatar" class="avatar">
        <p>ç¾å½¹èºé¬±ç—‡æ‚£è€…ï¼Œæœ‰ä¸€å€‹ podcast ã€å…©ä»½é›»å­å ±ã€‚</p>
        <p>é‹å‹•ç§‘å­¸ï¼ˆé‹å‹•ç”Ÿç‰©åŠ›å­¸ï¼‰ç ”ç©¶å“¡ã€å€å¡Šéˆæ¨å»£è€…ã€‚</p>
        <p>å°ç£æœ€å¤§å…è²» Podcast è£½ä½œæ•™å­¸ç¶²ç«™å…§å®¹ç·¨è¼¯ã€‚</p>
        <p>é‚€ç´„è¯çµ¡ï¼š<a href="mailto:wwhowbuhow@pm.me">wwhowbuhow@pm.me</a></p>
      `,
      contact: `
        <h1>Contact & Support</h1>
        <div class="card">
          <h3>Email</h3>
          <p><a href="mailto:wwhowbuhow@pm.me">wwhowbuhow@pm.me</a></p>
        </div>
        <div class="card">
          <h3>åŠ å¯†è²¨å¹£æŠ–å…§</h3>
          <p><a href="https://gcake119.fkey.id/" target="_blank" rel="noopener">æŠ–å…§é </a></p>
          <ul>
            <li>BTC on-chain: bc1qty2qy4vp69w5yecn5m8q56zlu80yz6uh3w9whr</li>
            <li>BTC lightning: <a href="mailto:gcake119@walletofsatoshi.com">gcake119@walletofsatoshi.com</a></li>
            <li>ETH: gcake119.fkey.eth</li>
            <li>ADA handle: $gcake119</li>
            <li>TEZ: gcake119.tez</li>
          </ul>
        </div>
        <div class="card">
          <h3>ç¡¬é«”éŒ¢åŒ…å¤¥ä¼´</h3>
          <ul>
            <li><a href="https://shop.ledger.com/pages/referral-program?referral_code=NNS6VK4T6YRFP" target="_blank" rel="noopener">Ledger</a></li>
            <li><a href="https://affil.trezor.io/SHh5" target="_blank" rel="noopener">Trezor</a></li>
            <li><a href="https://www.coolwallet.io/products/coolwallet-pro/?ref=zta0ymf" target="_blank" rel="noopener">CoolWallet</a></li>
          </ul>
        </div>
      `
    };

    /* ========================================
     * SPA è·¯ç”±ç³»çµ±
     * ======================================== */
    
    async function render() {
      // è§£æç•¶å‰ hash è·¯ç”±
      const [routePart] = location.hash.replace('#','').split('?');
      const hash = routePart || 'home';
      const app = document.getElementById('app');
      
      try {
        // æ ¹æ“š hash å€¼æ¸²æŸ“å°æ‡‰é é¢
        if (hash === 'podcast') {
          app.innerHTML = await pagePodcast1();
        } else if (hash === 'podcast2') {
          app.innerHTML = await pagePodcast2();
        } else if (hash === 'newsletter') {
          app.innerHTML = await pageNewsletter1();
        } else if (hash === 'newsletter2') {
          app.innerHTML = await pageNewsletter2();
        } else if (hash === 'viewPodcast') {
          // Podcast å–®é›†è©³æƒ…é é¢
          const q = params();
          if (!q.dir || !q.slug) {
            app.innerHTML = `<div class="card"><p>ç¼ºå°‘åƒæ•¸ã€‚</p></div>`;
          } else {
            app.innerHTML = await renderPodcastDetail(q.dir, q.slug);
          }
        } else if (hash === 'viewNewsletter') {
          // Newsletter å–®ç¯‡è©³æƒ…é é¢
          const q = params();
          if (!q.dir || !q.slug) {
            app.innerHTML = `<div class="card"><p>ç¼ºå°‘åƒæ•¸ã€‚</p></div>`;
          } else {
            app.innerHTML = await renderNewsletterDetail(q.dir, q.slug);
          }
        } else {
          // éœæ…‹é é¢
          app.innerHTML = staticPages[hash] || staticPages.home;
        }
      } catch (e) {
        // éŒ¯èª¤è™•ç†
        console.error('æ¸²æŸ“éŒ¯èª¤:', e);
        app.innerHTML = `<div class="card"><p>è¼‰å…¥å¤±æ•—ï¼š${htmlEscape(String(e.message || e))}</p></div>`;
      }
    }
    
    /* ========================================
     * åˆå§‹åŒ–èˆ‡äº‹ä»¶ç›£è½
     * ======================================== */
    
    // ç›£è½ hash è®ŠåŒ–ï¼Œå¯¦ç¾ SPA è·¯ç”±
    window.addEventListener('hashchange', render);
    
    // é é¢è¼‰å…¥å®Œæˆå¾Œé€²è¡Œåˆå§‹æ¸²æŸ“
    render();
  </script>
</body>
</html>
